

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="de" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="de" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>LXD Installation &mdash; handsOn  Dokumentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script type="text/javascript" src="../_static/translations.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Stichwortverzeichnis" href="../genindex.html" />
    <link rel="search" title="Suche" href="../search.html" />
    <link rel="next" title="Remote-Images" href="remote_images.html" />
    <link rel="prev" title="Was sind Container?" href="container_intro.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> handsOn
          

          
            
            <img src="../_static/darmarIT_logo_128.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../get_started.html">Get Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../handson_concept.html">Konzepte &amp; Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../motivation.html">Motivation &amp; Umfeld</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LICENSE.html">Lizenzbedingungen</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../desktop_system/index.html">Desktop Umgebungen</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ubuntu_remove_pkgs/index.html">Zweifelhafte Ubuntu Pakete</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ubuntu_install_pkgs/index.html">Anwendungspakete</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devTools/index.html">Entwickler Pakete</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nodejs/index.html">Node.js (development)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../apache_setup/index.html">Setup Apache2 HTTP Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mozcloud/index.html">Setup Mozilla Dienste</a></li>
<li class="toctree-l1"><a class="reference internal" href="../radicale/index.html">CalDAV &amp; CardDAV</a></li>
<li class="toctree-l1"><a class="reference internal" href="../print/index.html">Drucken mit CUPS &amp; IPP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scan/index.html">Scannen mit SANE</a></li>
<li class="toctree-l1"><a class="reference internal" href="../android/index.html">Android</a></li>
<li class="toctree-l1"><a class="reference internal" href="../snappy/index.html">Linux snap-Pakete</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Linux Container (LXC &amp; LXD)</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="container_intro.html">Was sind Container?</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">LXD Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="remote_images.html">Remote-Images</a></li>
<li class="toctree-l2"><a class="reference internal" href="container_images.html">Container &amp; Images</a></li>
<li class="toctree-l2"><a class="reference internal" href="working_with_containers.html">Arbeiten mit Containern</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../docker/index.html">Docker</a></li>
<li class="toctree-l1"><a class="reference internal" href="../citrix/index.html">Citrix Workspace App</a></li>
<li class="toctree-l1"><a class="reference internal" href="../oracle/index.html">Oracle (developer)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../searx.html">searx Suchmaschine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gogs.html">Gogs / Go Git Service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glances.html">Glances: an eye on your system</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pihole/index.html">pi-hole</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../excursion/index.html">Exkursionen und Erfahrungswerte</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">handsOn</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Linux Container (LXC &amp; LXD)</a> &raquo;</li>
        
      <li>LXD Installation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/lxdlxc/install_lxd_lxc.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="lxd-installation">
<span id="install-lxdlxc"></span><h1>LXD Installation<a class="headerlink" href="#lxd-installation" title="Link zu dieser Überschrift">¶</a></h1>
<p><a class="reference external" href="https://linuxcontainers.org/lxd/introduction/">LXD</a> ist das Managment System für <em>LXC Container</em> und alles was es darum herum
so gibt.  Will man mit Container arbeiten, so installiert man sich erst mal
dieses System.  Mit <a class="reference external" href="https://linuxcontainers.org/lxd/introduction/">LXD</a> hat man dann beispielsweise Zugriff auf die <a class="reference external" href="https://uk.images.linuxcontainers.org/">LXC/LXD
Image Server</a>.</p>
<p>Wenn wir von <strong>LXD</strong> reden, dann meinen wir i.d.R. den Manager für die
Container, wenn wir von <strong>LXC</strong> reden, dann meinen wir i.d.R. die Container
selbst.  Die Begriffe lassen sich aber nicht immer so ganz klar trennen.
Historisch ist alles aus den <a class="reference external" href="https://en.wikipedia.org/wiki/Cgroups">cgroups</a> des Linux Kernel entstanden, die erste
Anwendung waren die Container, im Laufe der Zeit entwickelte sich LXD darum
herum und inzwischen sind LXD und LXC eigentlich kaum noch zu trennen.  Die
nächst höhere Abstraktion ist dann die <a class="reference external" href="https://cloud-init.io/">cloud-init</a> die uns hier aber nicht
interessiert, der Fokus dieses Artikels liegt auf den <em>roots</em>, den Containern.</p>
<p>Früher hat man LXD noch über den Paketmanager der Distributionen installiert,
inzwischen wird das nicht mehr empfohlen und geht zum Teil auch gar nicht mehr.
Inzwischen können aktuelle Versionen des LXD nur über <a class="reference external" href="https://snapcraft.io">snap</a> installiert werden.
<em>Fun fakt</em> Snap selbst installiert Container und das LXD wird (nur noch) in
einem solchen Container ausgeliefert.</p>
<p>Das ganze erinnert ein wenig an Matrjoschka Puppen, das Bild stimmt aber nicht
ganz, da die Container (je nach Konfiguration) auch Zugriff auf Komponenten des
HOST Systems haben können. Aber es zeigt, dass wir mit der Installation von LXD
eigentlich schon die ersten Container Anwendungen nutzen und es zeigt, wie weit
man mit solchen Containern gehen kann.  Als erstes starten wir also mit der
Installation des <a class="reference external" href="https://snapcraft.io">snap</a>.  Um <a class="reference external" href="https://snapcraft.io">snap</a> zu installieren:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ sudo -H apt install snapd
</pre></div>
</div>
<p>Über die Paketverwaltung <a class="reference internal" href="../snappy/index.html#snap"><span class="std std-ref">snap</span></a> die erforderlichen Pakete
installieren (s.a. <a class="reference external" href="https://tutorials.ubuntu.com/tutorial/introduction-to-lxd-projects">Introduction to LXD projects</a>):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ sudo -H snap install lxd
</pre></div>
</div>
<p>Zur Installation gehört noch eine initiales Setup des LXD in dem der
Image-Server als auch z.B. die Eigenschaften des (LXD) Netzwerks eingestellt
werden.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ sudo -H lxd init --auto
</pre></div>
</div>
<p>Weitere Hinweise siehe: <a class="reference external" href="https://snapcraft.io/lxd">snapcraft LXD</a></p>
<p>Will man sicher später mal das LXD Setup anschauen, so kann man das mit dem
Kommando <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">lxd</span> <span class="pre">init</span> <span class="pre">--dump</span></code>, die Ausgabe entspricht dem YAML Format und
könnte in etwa so aussehen.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">config</span><span class="p">:</span> <span class="p p-Indicator">{}</span>
<span class="nt">networks</span><span class="p">:</span>
<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">lxdbr0</span>
  <span class="nt">config</span><span class="p">:</span>
    <span class="nt">ipv4.address</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">10.246.86.1/24</span>
    <span class="nt">ipv4.nat</span><span class="p">:</span> <span class="s">&quot;true&quot;</span>
    <span class="nt">ipv6.address</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">fd42:8c58:2cd:b73f::1/64</span>
    <span class="nt">ipv6.nat</span><span class="p">:</span> <span class="s">&quot;true&quot;</span>
  <span class="nt">description</span><span class="p">:</span> <span class="s">&quot;&quot;</span>
  <span class="nt">managed</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
  <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">bridge</span>
<span class="nt">storage_pools</span><span class="p">:</span>
<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">default</span>
  <span class="nt">config</span><span class="p">:</span>
    <span class="nt">size</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">15GB</span>
    <span class="nt">source</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/var/snap/lxd/common/lxd/disks/default.img</span>
    <span class="nt">zfs.pool_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">default</span>
  <span class="nt">description</span><span class="p">:</span> <span class="s">&quot;&quot;</span>
  <span class="nt">driver</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">zfs</span>
<span class="nt">profiles</span><span class="p">:</span>
<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">default</span>
  <span class="nt">config</span><span class="p">:</span> <span class="p p-Indicator">{}</span>
  <span class="nt">description</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Default LXD profile</span>
  <span class="nt">devices</span><span class="p">:</span>
    <span class="nt">eth0</span><span class="p">:</span>
      <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">eth0</span>
      <span class="nt">nictype</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">bridged</span>
      <span class="nt">parent</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">lxdbr0</span>
      <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">nic</span>
    <span class="nt">root</span><span class="p">:</span>
      <span class="nt">path</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/</span>
      <span class="nt">pool</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">default</span>
      <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">disk</span>
</pre></div>
</div>
<p>In obiger Ausgabe sehen wir unter <code class="docutils literal notranslate"><span class="pre">networks</span></code>, dass die IP Adresse des Managers
<code class="docutils literal notranslate"><span class="pre">10.246.86.1/24</span></code> ist und es sich um ein Class C Netzwerk im Adressraum
<code class="docutils literal notranslate"><span class="pre">10.0.0.0</span></code> handelt.</p>
<p>Unter <code class="docutils literal notranslate"><span class="pre">storage_pools</span></code> sehen wir, dass die LXD <em>Datenbank</em> im <em>default</em> eine
(maximale) Größe von 15GB hat.  Genau genommen ist diese <em>Datenbank</em> das Image
eines <a class="reference external" href="https://de.wikipedia.org/wiki/SquashFS">Squash Dateisystems</a>.</p>
<p>Weiter sieht man, dass es ein <em>default</em> Profil gibt.  Aus den Profilen werden
(u.A.) die Container gebaut.  Hier sieht man, das ein solcher Container (intern)
mit einem Netzwerkadapter (<code class="docutils literal notranslate"><span class="pre">eth0</span></code>) ausgestattet wird und <code class="docutils literal notranslate"><span class="pre">pool:</span> <span class="pre">default</span></code> sagt
uns, dass dieser Container in dem Squash Dateisystem aufgebaut werden würde,
dass wir unter <code class="docutils literal notranslate"><span class="pre">storage_pools:</span></code> unter dem Namen <code class="docutils literal notranslate"><span class="pre">default</span></code> sehen.</p>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="remote_images.html" class="btn btn-neutral float-right" title="Remote-Images" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="container_intro.html" class="btn btn-neutral float-left" title="Was sind Container?" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019 Markus Heiser

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>